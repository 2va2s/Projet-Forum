<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>58-99 - Accueil</title>
    <link rel="icon" href="/static/logo.svg">
    <link rel="stylesheet" href="/static/style/accueil.css">
    <link rel="stylesheet" href="/static/style/.layout.css">
    <link rel="stylesheet" href="/static/style/components/postCard.css">
</head>

<body>
    {{template "menu"}}
    <div id="firsthalf">
        <div id="citation">
            <h1>"Le courage n'est pas l'absence de peur, mais la capacité de vaincre ce qui fait peur."</h1>
            <h2>-Nelson Mandela</h2>
        </div>
        <div id="posts">
            <h2 id="connected"> Connecté en tant que </h2>
            <p id="topicList"> liste des topics :<br></p>
            <a href="/logout" id="logout">Déconnexion</a>
            <a href="/connexion-inscription" id="login" style="display:none;">Se connecter</a>
        </div>
    </div>
    <div id="filters"></div>
</body>

<script type="text/javascript" src="../static/js/accueil.js"></script>
<script type="text/javascript" src="../static/js/menu.js"></script>
<script type="text/javascript">
    const redirectToPost = (id) => {
        fetch('/posts').then(location.href = '/topic/' + id)
    }

    const redirectToUser = (id) => {
        fetch('/users').then(location.href = '/user/' + id)
    }

    const vote = (id, upvote, pol) => {
        console.log(typeof id)
        fetch("/UpdateVote", {
            method: "POST",
            headers: {
                "content-type": "application/json"
            },
            body: JSON.stringify({
                Table: "post",
                Id: id.toString(),
                Field: "UpVote",
                Value: (upvote + pol).toString(),
                Where: "ID",
                Value2: id.toString()
            })
        }).then(response => response.text()).then(data => {
            document.getElementById("upvote#"+id).innerText = data
        })
    }
</script>

</html>